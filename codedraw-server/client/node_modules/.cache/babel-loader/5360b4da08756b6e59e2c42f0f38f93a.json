{"ast":null,"code":"// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n(function (mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);else // Plain browser env\n    mod(CodeMirror);\n})(function (CodeMirror) {\n  \"use strict\";\n\n  CodeMirror.defineMode(\"puppet\", function () {\n    // Stores the words from the define method\n    var words = {}; // Taken, mostly, from the Puppet official variable standards regex\n\n    var variable_regex = /({)?([a-z][a-z0-9_]*)?((::[a-z][a-z0-9_]*)*::)?[a-zA-Z0-9_]+(})?/; // Takes a string of words separated by spaces and adds them as\n    // keys with the value of the first argument 'style'\n\n    function define(style, string) {\n      var split = string.split(' ');\n\n      for (var i = 0; i < split.length; i++) {\n        words[split[i]] = style;\n      }\n    } // Takes commonly known puppet types/words and classifies them to a style\n\n\n    define('keyword', 'class define site node include import inherits');\n    define('keyword', 'case if else in and elsif default or');\n    define('atom', 'false true running present absent file directory undef');\n    define('builtin', 'action augeas burst chain computer cron destination dport exec ' + 'file filebucket group host icmp iniface interface jump k5login limit log_level ' + 'log_prefix macauthorization mailalias maillist mcx mount nagios_command ' + 'nagios_contact nagios_contactgroup nagios_host nagios_hostdependency ' + 'nagios_hostescalation nagios_hostextinfo nagios_hostgroup nagios_service ' + 'nagios_servicedependency nagios_serviceescalation nagios_serviceextinfo ' + 'nagios_servicegroup nagios_timeperiod name notify outiface package proto reject ' + 'resources router schedule scheduled_task selboolean selmodule service source ' + 'sport ssh_authorized_key sshkey stage state table tidy todest toports tosource ' + 'user vlan yumrepo zfs zone zpool'); // After finding a start of a string ('|\") this function attempts to find the end;\n    // If a variable is encountered along the way, we display it differently when it\n    // is encapsulated in a double-quoted string.\n\n    function tokenString(stream, state) {\n      var current,\n          prev,\n          found_var = false;\n\n      while (!stream.eol() && (current = stream.next()) != state.pending) {\n        if (current === '$' && prev != '\\\\' && state.pending == '\"') {\n          found_var = true;\n          break;\n        }\n\n        prev = current;\n      }\n\n      if (found_var) {\n        stream.backUp(1);\n      }\n\n      if (current == state.pending) {\n        state.continueString = false;\n      } else {\n        state.continueString = true;\n      }\n\n      return \"string\";\n    } // Main function\n\n\n    function tokenize(stream, state) {\n      // Matches one whole word\n      var word = stream.match(/[\\w]+/, false); // Matches attributes (i.e. ensure => present ; 'ensure' would be matched)\n\n      var attribute = stream.match(/(\\s+)?\\w+\\s+=>.*/, false); // Matches non-builtin resource declarations\n      // (i.e. \"apache::vhost {\" or \"mycustomclasss {\" would be matched)\n\n      var resource = stream.match(/(\\s+)?[\\w:_]+(\\s+)?{/, false); // Matches virtual and exported resources (i.e. @@user { ; and the like)\n\n      var special_resource = stream.match(/(\\s+)?[@]{1,2}[\\w:_]+(\\s+)?{/, false); // Finally advance the stream\n\n      var ch = stream.next(); // Have we found a variable?\n\n      if (ch === '$') {\n        if (stream.match(variable_regex)) {\n          // If so, and its in a string, assign it a different color\n          return state.continueString ? 'variable-2' : 'variable';\n        } // Otherwise return an invalid variable\n\n\n        return \"error\";\n      } // Should we still be looking for the end of a string?\n\n\n      if (state.continueString) {\n        // If so, go through the loop again\n        stream.backUp(1);\n        return tokenString(stream, state);\n      } // Are we in a definition (class, node, define)?\n\n\n      if (state.inDefinition) {\n        // If so, return def (i.e. for 'class myclass {' ; 'myclass' would be matched)\n        if (stream.match(/(\\s+)?[\\w:_]+(\\s+)?/)) {\n          return 'def';\n        } // Match the rest it the next time around\n\n\n        stream.match(/\\s+{/);\n        state.inDefinition = false;\n      } // Are we in an 'include' statement?\n\n\n      if (state.inInclude) {\n        // Match and return the included class\n        stream.match(/(\\s+)?\\S+(\\s+)?/);\n        state.inInclude = false;\n        return 'def';\n      } // Do we just have a function on our hands?\n      // In 'ensure_resource(\"myclass\")', 'ensure_resource' is matched\n\n\n      if (stream.match(/(\\s+)?\\w+\\(/)) {\n        stream.backUp(1);\n        return 'def';\n      } // Have we matched the prior attribute regex?\n\n\n      if (attribute) {\n        stream.match(/(\\s+)?\\w+/);\n        return 'tag';\n      } // Do we have Puppet specific words?\n\n\n      if (word && words.hasOwnProperty(word)) {\n        // Negates the initial next()\n        stream.backUp(1); // rs move the stream\n\n        stream.match(/[\\w]+/); // We want to process these words differently\n        // do to the importance they have in Puppet\n\n        if (stream.match(/\\s+\\S+\\s+{/, false)) {\n          state.inDefinition = true;\n        }\n\n        if (word == 'include') {\n          state.inInclude = true;\n        } // Returns their value as state in the prior define methods\n\n\n        return words[word];\n      } // Is there a match on a reference?\n\n\n      if (/(^|\\s+)[A-Z][\\w:_]+/.test(word)) {\n        // Negate the next()\n        stream.backUp(1); // Match the full reference\n\n        stream.match(/(^|\\s+)[A-Z][\\w:_]+/);\n        return 'def';\n      } // Have we matched the prior resource regex?\n\n\n      if (resource) {\n        stream.match(/(\\s+)?[\\w:_]+/);\n        return 'def';\n      } // Have we matched the prior special_resource regex?\n\n\n      if (special_resource) {\n        stream.match(/(\\s+)?[@]{1,2}/);\n        return 'special';\n      } // Match all the comments. All of them.\n\n\n      if (ch == \"#\") {\n        stream.skipToEnd();\n        return \"comment\";\n      } // Have we found a string?\n\n\n      if (ch == \"'\" || ch == '\"') {\n        // Store the type (single or double)\n        state.pending = ch; // Perform the looping function to find the end\n\n        return tokenString(stream, state);\n      } // Match all the brackets\n\n\n      if (ch == '{' || ch == '}') {\n        return 'bracket';\n      } // Match characters that we are going to assume\n      // are trying to be regex\n\n\n      if (ch == '/') {\n        stream.match(/.*?\\//);\n        return 'variable-3';\n      } // Match all the numbers\n\n\n      if (ch.match(/[0-9]/)) {\n        stream.eatWhile(/[0-9]+/);\n        return 'number';\n      } // Match the '=' and '=>' operators\n\n\n      if (ch == '=') {\n        if (stream.peek() == '>') {\n          stream.next();\n        }\n\n        return \"operator\";\n      } // Keep advancing through all the rest\n\n\n      stream.eatWhile(/[\\w-]/); // Return a blank line for everything else\n\n      return null;\n    } // Start it all\n\n\n    return {\n      startState: function startState() {\n        var state = {};\n        state.inDefinition = false;\n        state.inInclude = false;\n        state.continueString = false;\n        state.pending = false;\n        return state;\n      },\n      token: function token(stream, state) {\n        // Strip the spaces, but regex will account for them eitherway\n        if (stream.eatSpace()) return null; // Go through the main process\n\n        return tokenize(stream, state);\n      }\n    };\n  });\n  CodeMirror.defineMIME(\"text/x-puppet\", \"puppet\");\n});","map":{"version":3,"sources":["/Users/akshatgarg/Documents/codedraw-server/client/node_modules/@uiw/react-codemirror/node_modules/codemirror/mode/puppet/puppet.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","defineMode","words","variable_regex","style","string","split","i","length","tokenString","stream","state","current","prev","found_var","eol","next","pending","backUp","continueString","tokenize","word","match","attribute","resource","special_resource","ch","inDefinition","inInclude","hasOwnProperty","test","skipToEnd","eatWhile","peek","startState","token","eatSpace","defineMIME"],"mappings":"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","sourcesContent":["// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: https://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n\"use strict\";\n\nCodeMirror.defineMode(\"puppet\", function () {\n  // Stores the words from the define method\n  var words = {};\n  // Taken, mostly, from the Puppet official variable standards regex\n  var variable_regex = /({)?([a-z][a-z0-9_]*)?((::[a-z][a-z0-9_]*)*::)?[a-zA-Z0-9_]+(})?/;\n\n  // Takes a string of words separated by spaces and adds them as\n  // keys with the value of the first argument 'style'\n  function define(style, string) {\n    var split = string.split(' ');\n    for (var i = 0; i < split.length; i++) {\n      words[split[i]] = style;\n    }\n  }\n\n  // Takes commonly known puppet types/words and classifies them to a style\n  define('keyword', 'class define site node include import inherits');\n  define('keyword', 'case if else in and elsif default or');\n  define('atom', 'false true running present absent file directory undef');\n  define('builtin', 'action augeas burst chain computer cron destination dport exec ' +\n    'file filebucket group host icmp iniface interface jump k5login limit log_level ' +\n    'log_prefix macauthorization mailalias maillist mcx mount nagios_command ' +\n    'nagios_contact nagios_contactgroup nagios_host nagios_hostdependency ' +\n    'nagios_hostescalation nagios_hostextinfo nagios_hostgroup nagios_service ' +\n    'nagios_servicedependency nagios_serviceescalation nagios_serviceextinfo ' +\n    'nagios_servicegroup nagios_timeperiod name notify outiface package proto reject ' +\n    'resources router schedule scheduled_task selboolean selmodule service source ' +\n    'sport ssh_authorized_key sshkey stage state table tidy todest toports tosource ' +\n    'user vlan yumrepo zfs zone zpool');\n\n  // After finding a start of a string ('|\") this function attempts to find the end;\n  // If a variable is encountered along the way, we display it differently when it\n  // is encapsulated in a double-quoted string.\n  function tokenString(stream, state) {\n    var current, prev, found_var = false;\n    while (!stream.eol() && (current = stream.next()) != state.pending) {\n      if (current === '$' && prev != '\\\\' && state.pending == '\"') {\n        found_var = true;\n        break;\n      }\n      prev = current;\n    }\n    if (found_var) {\n      stream.backUp(1);\n    }\n    if (current == state.pending) {\n      state.continueString = false;\n    } else {\n      state.continueString = true;\n    }\n    return \"string\";\n  }\n\n  // Main function\n  function tokenize(stream, state) {\n    // Matches one whole word\n    var word = stream.match(/[\\w]+/, false);\n    // Matches attributes (i.e. ensure => present ; 'ensure' would be matched)\n    var attribute = stream.match(/(\\s+)?\\w+\\s+=>.*/, false);\n    // Matches non-builtin resource declarations\n    // (i.e. \"apache::vhost {\" or \"mycustomclasss {\" would be matched)\n    var resource = stream.match(/(\\s+)?[\\w:_]+(\\s+)?{/, false);\n    // Matches virtual and exported resources (i.e. @@user { ; and the like)\n    var special_resource = stream.match(/(\\s+)?[@]{1,2}[\\w:_]+(\\s+)?{/, false);\n\n    // Finally advance the stream\n    var ch = stream.next();\n\n    // Have we found a variable?\n    if (ch === '$') {\n      if (stream.match(variable_regex)) {\n        // If so, and its in a string, assign it a different color\n        return state.continueString ? 'variable-2' : 'variable';\n      }\n      // Otherwise return an invalid variable\n      return \"error\";\n    }\n    // Should we still be looking for the end of a string?\n    if (state.continueString) {\n      // If so, go through the loop again\n      stream.backUp(1);\n      return tokenString(stream, state);\n    }\n    // Are we in a definition (class, node, define)?\n    if (state.inDefinition) {\n      // If so, return def (i.e. for 'class myclass {' ; 'myclass' would be matched)\n      if (stream.match(/(\\s+)?[\\w:_]+(\\s+)?/)) {\n        return 'def';\n      }\n      // Match the rest it the next time around\n      stream.match(/\\s+{/);\n      state.inDefinition = false;\n    }\n    // Are we in an 'include' statement?\n    if (state.inInclude) {\n      // Match and return the included class\n      stream.match(/(\\s+)?\\S+(\\s+)?/);\n      state.inInclude = false;\n      return 'def';\n    }\n    // Do we just have a function on our hands?\n    // In 'ensure_resource(\"myclass\")', 'ensure_resource' is matched\n    if (stream.match(/(\\s+)?\\w+\\(/)) {\n      stream.backUp(1);\n      return 'def';\n    }\n    // Have we matched the prior attribute regex?\n    if (attribute) {\n      stream.match(/(\\s+)?\\w+/);\n      return 'tag';\n    }\n    // Do we have Puppet specific words?\n    if (word && words.hasOwnProperty(word)) {\n      // Negates the initial next()\n      stream.backUp(1);\n      // rs move the stream\n      stream.match(/[\\w]+/);\n      // We want to process these words differently\n      // do to the importance they have in Puppet\n      if (stream.match(/\\s+\\S+\\s+{/, false)) {\n        state.inDefinition = true;\n      }\n      if (word == 'include') {\n        state.inInclude = true;\n      }\n      // Returns their value as state in the prior define methods\n      return words[word];\n    }\n    // Is there a match on a reference?\n    if (/(^|\\s+)[A-Z][\\w:_]+/.test(word)) {\n      // Negate the next()\n      stream.backUp(1);\n      // Match the full reference\n      stream.match(/(^|\\s+)[A-Z][\\w:_]+/);\n      return 'def';\n    }\n    // Have we matched the prior resource regex?\n    if (resource) {\n      stream.match(/(\\s+)?[\\w:_]+/);\n      return 'def';\n    }\n    // Have we matched the prior special_resource regex?\n    if (special_resource) {\n      stream.match(/(\\s+)?[@]{1,2}/);\n      return 'special';\n    }\n    // Match all the comments. All of them.\n    if (ch == \"#\") {\n      stream.skipToEnd();\n      return \"comment\";\n    }\n    // Have we found a string?\n    if (ch == \"'\" || ch == '\"') {\n      // Store the type (single or double)\n      state.pending = ch;\n      // Perform the looping function to find the end\n      return tokenString(stream, state);\n    }\n    // Match all the brackets\n    if (ch == '{' || ch == '}') {\n      return 'bracket';\n    }\n    // Match characters that we are going to assume\n    // are trying to be regex\n    if (ch == '/') {\n      stream.match(/.*?\\//);\n      return 'variable-3';\n    }\n    // Match all the numbers\n    if (ch.match(/[0-9]/)) {\n      stream.eatWhile(/[0-9]+/);\n      return 'number';\n    }\n    // Match the '=' and '=>' operators\n    if (ch == '=') {\n      if (stream.peek() == '>') {\n          stream.next();\n      }\n      return \"operator\";\n    }\n    // Keep advancing through all the rest\n    stream.eatWhile(/[\\w-]/);\n    // Return a blank line for everything else\n    return null;\n  }\n  // Start it all\n  return {\n    startState: function () {\n      var state = {};\n      state.inDefinition = false;\n      state.inInclude = false;\n      state.continueString = false;\n      state.pending = false;\n      return state;\n    },\n    token: function (stream, state) {\n      // Strip the spaces, but regex will account for them eitherway\n      if (stream.eatSpace()) return null;\n      // Go through the main process\n      return tokenize(stream, state);\n    }\n  };\n});\n\nCodeMirror.defineMIME(\"text/x-puppet\", \"puppet\");\n\n});\n"]},"metadata":{},"sourceType":"script"}